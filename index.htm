<!DOCTYPE html>
<head>
  <meta charset='utf-8'>
  <link rel='stylesheet' type='text/css' href='dist/style.css'>
</head>

<body>
  <h3> Signal Input </h3>
  Signal Formula (use i for obtain the current value):
    <input id='signalFormula'
      value='Math.cos(Math.PI*2*i/20)*75'
    />
  <br/>

  <div id ='c1'>
    <div id='c2'>
      <svg id='signalInput' class='signal' height='300' width='350'>
      </svg>
    </div>
  </div>
<input type="text" value="75" class="dial"
  data-width="75"
  data-fgColor="#ffec03"
  data-skin="tron"
  data-thickness=".2"
  data-displayPrevious=true
>


  <script src='dist/lib.js'></script>

<p>
    Math.cos(Math.PI*2*i/200)*(Math.cos(Math.PI*2*i/40)+Math.random()/2)*75
</p>
<p>
    Math.cos(Math.PI*2*i/200)*(Math.cos(Math.PI*2*i/40)+Math.random()/20)*75
</p>


  <script>
    //$(".dial").knob();
    var svg = d3.select('#signalInput')
      , input = new Graph(svg, 20, 100)
      , grid = new GraphGrid(svg, [20, 20, 20, 20])
      , signalFormula = d3.select('#signalFormula')
      , strFormula = 'Math.cos(Math.PI*2*i/20)*75'
      ;

    function changeInput(value){
      strFormula = value;
    }

    signalFormula.attr('value' , strFormula)
    signalFormula.attr('onchange', 'changeInput(this.value)');

    var i = 0;
    setInterval( function(){
      var value = 0;
      try {
          value = eval(strFormula);
          signalFormula.classed('field-error', false);
      } catch (e) {
          signalFormula.classed('field-error', true);
      }
      input.step(value);
      i++;
    },40)
  </script>


</body>
</htlm>
